        -:    0:Source:src/backend/api/handlers/machine_handler.c
        -:    0:Graph:build_backend_tests/test_api-machine_handler.gcno
        -:    0:Data:build_backend_tests/test_api-machine_handler.gcda
        -:    0:Runs:1
        -:    1:#include "machine_handler.h"
        -:    2:#include "../../database/api_handlers.h"
        -:    3:#include "../../database/machine_service.h"
        -:    4:#include "../../database/cJSON.h"
        -:    5:#include <string.h>
        -:    6:#include <stdlib.h>
        -:    7:#include <stdio.h>
        -:    8:
        -:    9:
        -:   10:
function serialize_machines_to_json called 0 returned 0% blocks executed 0%
    #####:   11:char *serialize_machines_to_json(void) {
    #####:   12:  cJSON *root = cJSON_CreateObject();
call    0 never executed
    #####:   13:  cJSON *items = cJSON_CreateArray();
call    0 never executed
    #####:   14:  cJSON *item1 = cJSON_CreateObject();
call    0 never executed
    #####:   15:  cJSON_AddNumberToObject(item1, "id", 1);
call    0 never executed
    #####:   16:  cJSON_AddStringToObject(item1, "name", "CNC Machine");
call    0 never executed
    #####:   17:  cJSON_AddStringToObject(item1, "status", "running");
call    0 never executed
    #####:   18:  cJSON_AddItemToArray(items, item1);
call    0 never executed
    #####:   19:  cJSON_AddItemToObject(root, "machines", items);
call    0 never executed
    #####:   20:  char *json = cJSON_Print(root);
call    0 never executed
    #####:   21:  cJSON_Delete(root);
call    0 never executed
    #####:   22:  return json;
        -:   23:}
        -:   24:
function handle_machine_request called 0 returned 0% blocks executed 0%
    #####:   25:void handle_machine_request(HttpRequest *req, HttpResponse *res) {
    #####:   26:  if (strcmp(req->method, "GET") == 0) {
branch  0 never executed (fallthrough)
branch  1 never executed
    #####:   27:    char *json = serialize_machines_to_json();
call    0 never executed
    #####:   28:    res->status_code = 200;
    #####:   29:    strcpy(res->content_type, "application/json");
    #####:   30:    strncpy(res->body, json, 8191);
    #####:   31:    free(json);
    #####:   32:  } else if (strcmp(req->method, "POST") == 0) {
branch  0 never executed (fallthrough)
branch  1 never executed
        -:   33:    // Simple mock for onboarding since we need more robust JSON parsing for real POST
        -:   34:    // In a real scenario, we'd parse req->body here
    #####:   35:    res->status_code = 201;
    #####:   36:    strcpy(res->body, "{\"success\": true, \"message\": \"Machine onboarded\"}");
        -:   37:  }
    #####:   38:}
