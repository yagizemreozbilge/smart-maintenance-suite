        -:    0:Source:src/backend/tests/unit/test_api_handlers.c
        -:    0:Graph:C:\Users\yagiz\Desktop\Project\smart-maintenance-suite\build_backend_tests\test_api-test_api_handlers.gcno
        -:    0:Data:-
        -:    0:Runs:0
        -:    1:#include "../../api/http_server.h"
        -:    2:#include "../../api/router.h"
        -:    3:#include <stdio.h>
        -:    4:#include <assert.h>
        -:    5:#include <string.h>
        -:    6:
function test_http_request_struct called 0 returned 0% blocks executed 0%
    #####:    7:void test_http_request_struct() {
        -:    8:  HttpRequest req;
        -:    9:  assert(sizeof(req.method) == 10);
        -:   10:  assert(sizeof(req.path) == 256);
        -:   11:  assert(sizeof(req.query_params) == 512);
        -:   12:  assert(sizeof(req.body) == 4096);
    #####:   13:  printf("[PASS] HttpRequest struct: correct sizes\n");
call    0 never executed
    #####:   14:}
        -:   15:
function test_http_response_struct called 0 returned 0% blocks executed 0%
    #####:   16:void test_http_response_struct() {
        -:   17:  HttpResponse res;
        -:   18:  assert(sizeof(res.content_type) == 64);
        -:   19:  assert(sizeof(res.body) == 8192);
    #####:   20:  printf("[PASS] HttpResponse struct: correct sizes\n");
call    0 never executed
    #####:   21:}
        -:   22:
function test_request_initialization called 0 returned 0% blocks executed 0%
    #####:   23:void test_request_initialization() {
    #####:   24:  HttpRequest req = {0};
    #####:   25:  strcpy(req.method, "GET");
    #####:   26:  strcpy(req.path, "/api/machines");
    #####:   27:  assert(strcmp(req.method, "GET") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   28:  assert(strcmp(req.path, "/api/machines") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   29:  printf("[PASS] HttpRequest: initialization\n");
call    0 never executed
    #####:   30:}
        -:   31:
function test_response_initialization called 0 returned 0% blocks executed 0%
    #####:   32:void test_response_initialization() {
    #####:   33:  HttpResponse res = {0};
    #####:   34:  res.status_code = 200;
    #####:   35:  strcpy(res.content_type, "application/json");
    #####:   36:  strcpy(res.body, "{\"success\": true}");
    #####:   37:  assert(res.status_code == 200);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   38:  assert(strcmp(res.content_type, "application/json") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   39:  assert(strstr(res.body, "success") != NULL);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   40:  printf("[PASS] HttpResponse: initialization\n");
call    0 never executed
    #####:   41:}
        -:   42:
function test_request_with_query_params called 0 returned 0% blocks executed 0%
    #####:   43:void test_request_with_query_params() {
    #####:   44:  HttpRequest req = {0};
    #####:   45:  strcpy(req.method, "GET");
    #####:   46:  strcpy(req.path, "/api/login");
    #####:   47:  strcpy(req.query_params, "u=admin&p=admin123");
    #####:   48:  assert(strstr(req.query_params, "u=admin") != NULL);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   49:  assert(strstr(req.query_params, "p=admin123") != NULL);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   50:  printf("[PASS] HttpRequest: query parameters\n");
call    0 never executed
    #####:   51:}
        -:   52:
function test_request_with_body called 0 returned 0% blocks executed 0%
    #####:   53:void test_request_with_body() {
    #####:   54:  HttpRequest req = {0};
    #####:   55:  strcpy(req.method, "POST");
    #####:   56:  strcpy(req.path, "/api/machines");
    #####:   57:  strcpy(req.body, "{\"name\": \"New Machine\", \"status\": \"operational\"}");
    #####:   58:  assert(strcmp(req.method, "POST") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   59:  assert(strstr(req.body, "New Machine") != NULL);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   60:  printf("[PASS] HttpRequest: POST with body\n");
call    0 never executed
    #####:   61:}
        -:   62:
function test_response_status_codes called 0 returned 0% blocks executed 0%
    #####:   63:void test_response_status_codes() {
    #####:   64:  HttpResponse res1 = {.status_code = 200};
    #####:   65:  HttpResponse res2 = {.status_code = 201};
    #####:   66:  HttpResponse res3 = {.status_code = 400};
    #####:   67:  HttpResponse res4 = {.status_code = 401};
    #####:   68:  HttpResponse res5 = {.status_code = 404};
    #####:   69:  HttpResponse res6 = {.status_code = 500};
    #####:   70:  assert(res1.status_code == 200);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   71:  assert(res2.status_code == 201);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   72:  assert(res3.status_code == 400);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   73:  assert(res4.status_code == 401);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   74:  assert(res5.status_code == 404);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   75:  assert(res6.status_code == 500);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   76:  printf("[PASS] HttpResponse: all status codes\n");
call    0 never executed
    #####:   77:}
        -:   78:
function test_response_content_types called 0 returned 0% blocks executed 0%
    #####:   79:void test_response_content_types() {
    #####:   80:  HttpResponse res1 = {0};
    #####:   81:  strcpy(res1.content_type, "application/json");
    #####:   82:  HttpResponse res2 = {0};
    #####:   83:  strcpy(res2.content_type, "application/xml");
    #####:   84:  HttpResponse res3 = {0};
    #####:   85:  strcpy(res3.content_type, "text/csv");
    #####:   86:  assert(strcmp(res1.content_type, "application/json") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   87:  assert(strcmp(res2.content_type, "application/xml") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   88:  assert(strcmp(res3.content_type, "text/csv") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:   89:  printf("[PASS] HttpResponse: content types\n");
call    0 never executed
    #####:   90:}
        -:   91:
function test_request_method_types called 0 returned 0% blocks executed 0%
    #####:   92:void test_request_method_types() {
    #####:   93:  HttpRequest req1 = {0};
    #####:   94:  strcpy(req1.method, "GET");
    #####:   95:  HttpRequest req2 = {0};
    #####:   96:  strcpy(req2.method, "POST");
    #####:   97:  HttpRequest req3 = {0};
    #####:   98:  strcpy(req3.method, "PUT");
    #####:   99:  HttpRequest req4 = {0};
    #####:  100:  strcpy(req4.method, "DELETE");
    #####:  101:  HttpRequest req5 = {0};
    #####:  102:  strcpy(req5.method, "OPTIONS");
    #####:  103:  assert(strcmp(req1.method, "GET") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:  104:  assert(strcmp(req2.method, "POST") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:  105:  assert(strcmp(req3.method, "PUT") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:  106:  assert(strcmp(req4.method, "DELETE") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:  107:  assert(strcmp(req5.method, "OPTIONS") == 0);
branch  0 never executed (fallthrough)
branch  1 never executed
call    2 never executed
    #####:  108:  printf("[PASS] HttpRequest: all HTTP methods\n");
call    0 never executed
    #####:  109:}
        -:  110:
function main called 0 returned 0% blocks executed 0%
    #####:  111:int main() {
    #####:  112:  printf("=== API Handlers Unit Tests ===\n");
call    0 never executed
    #####:  113:  test_http_request_struct();
call    0 never executed
    #####:  114:  test_http_response_struct();
call    0 never executed
    #####:  115:  test_request_initialization();
call    0 never executed
    #####:  116:  test_response_initialization();
call    0 never executed
    #####:  117:  test_request_with_query_params();
call    0 never executed
    #####:  118:  test_request_with_body();
call    0 never executed
    #####:  119:  test_response_status_codes();
call    0 never executed
    #####:  120:  test_response_content_types();
call    0 never executed
    #####:  121:  test_request_method_types();
call    0 never executed
    #####:  122:  printf("\nâœ… All API Handler unit tests passed!\n");
call    0 never executed
    #####:  123:  return 0;
        -:  124:}
